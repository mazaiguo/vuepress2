import{_ as n,o as s,c as a,e as t}from"./app-a242af93.js";const p={},o=t(`<h1 id="获取acad背景色的两种方案" tabindex="-1"><a class="header-anchor" href="#获取acad背景色的两种方案" aria-hidden="true">#</a> 获取ACAD背景色的两种方案：</h1><ul><li>在这种情况下，我们可以使用函数<strong>unsigned long acedGetRGB(int color);</strong> 使用参数 0 来获取背景颜色。</li><li>另一种选择是使用 acedGetCurrentColors 函数，您可以从中获取 dwGfxModelBkColor 和 dwGfxLayoutBkColor 并（取决于tilemode值）使用您需要的。</li></ul><h2 id="acedgetrgb" tabindex="-1"><a class="header-anchor" href="#acedgetrgb" aria-hidden="true">#</a> <mark>acedGetRGB</mark></h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token class-name">CWHASSET</span><span class="token double-colon punctuation">::</span><span class="token function">drawWipeOut</span><span class="token punctuation">(</span>AcDbExtents exts<span class="token punctuation">,</span> AcGiWorldDraw <span class="token operator">*</span>mode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">showFramFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		AcGePoint3d minPt<span class="token punctuation">,</span> maxPt<span class="token punctuation">;</span>
		minPt <span class="token operator">=</span> exts<span class="token punctuation">.</span><span class="token function">minPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		maxPt <span class="token operator">=</span> exts<span class="token punctuation">.</span><span class="token function">maxPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		AcGePoint3dArray wipePnts<span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>minPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">AcGePoint3d</span><span class="token punctuation">(</span>minPt<span class="token punctuation">.</span>x<span class="token punctuation">,</span> maxPt<span class="token punctuation">.</span>y<span class="token punctuation">,</span> minPt<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>maxPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">AcGePoint3d</span><span class="token punctuation">(</span>maxPt<span class="token punctuation">.</span>x<span class="token punctuation">,</span> minPt<span class="token punctuation">.</span>y<span class="token punctuation">,</span> maxPt<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>minPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		Adesk<span class="token double-colon punctuation">::</span>UInt32 lColor <span class="token operator">=</span> <span class="token function">acedGetRGB</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//UInt32需要转化成rgb数据</span>
		<span class="token keyword">int</span> R <span class="token operator">=</span> <span class="token number">0xFF</span> <span class="token operator">&amp;</span> lColor<span class="token punctuation">;</span>
		<span class="token keyword">int</span> G <span class="token operator">=</span> <span class="token number">0xFF00</span> <span class="token operator">&amp;</span> lColor<span class="token punctuation">;</span>
		G <span class="token operator">&gt;&gt;=</span> <span class="token number">8</span><span class="token punctuation">;</span>
		<span class="token keyword">int</span> B <span class="token operator">=</span> <span class="token number">0xFF0000</span> <span class="token operator">&amp;</span> lColor<span class="token punctuation">;</span>
		B <span class="token operator">&gt;&gt;=</span> <span class="token number">16</span><span class="token punctuation">;</span>AcCmEntityColor cmColor<span class="token punctuation">;</span>
        cmColor<span class="token punctuation">.</span><span class="token function">setRGB</span><span class="token punctuation">(</span>R<span class="token punctuation">,</span> G<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mode<span class="token operator">-&gt;</span><span class="token function">subEntityTraits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTrueColor</span><span class="token punctuation">(</span>cmColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mode<span class="token operator">-&gt;</span><span class="token function">subEntityTraits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFillType</span><span class="token punctuation">(</span>kAcGiFillAlways<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mode<span class="token operator">-&gt;</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">polygon</span><span class="token punctuation">(</span>wipePnts<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wipePnts<span class="token punctuation">.</span><span class="token function">asArrayPtr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="acedgetcurrentcolors" tabindex="-1"><a class="header-anchor" href="#acedgetcurrentcolors" aria-hidden="true">#</a> acedGetCurrentColors</h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token keyword">void</span> <span class="token class-name">CWHASSET</span><span class="token double-colon punctuation">::</span><span class="token function">drawWipeOut</span><span class="token punctuation">(</span>AcDbExtents exts<span class="token punctuation">,</span> AcGiWorldDraw <span class="token operator">*</span>mode<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">showFramFlag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		AcGePoint3d minPt<span class="token punctuation">,</span> maxPt<span class="token punctuation">;</span>
		minPt <span class="token operator">=</span> exts<span class="token punctuation">.</span><span class="token function">minPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		maxPt <span class="token operator">=</span> exts<span class="token punctuation">.</span><span class="token function">maxPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		AcGePoint3dArray wipePnts<span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>minPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">AcGePoint3d</span><span class="token punctuation">(</span>minPt<span class="token punctuation">.</span>x<span class="token punctuation">,</span> maxPt<span class="token punctuation">.</span>y<span class="token punctuation">,</span> minPt<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>maxPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token function">AcGePoint3d</span><span class="token punctuation">(</span>maxPt<span class="token punctuation">.</span>x<span class="token punctuation">,</span> minPt<span class="token punctuation">.</span>y<span class="token punctuation">,</span> maxPt<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		wipePnts<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>minPt<span class="token punctuation">)</span><span class="token punctuation">;</span>
		AcColorSettings colorSetings<span class="token punctuation">;</span> 
		<span class="token function">acedGetCurrentColors</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>colorSetings<span class="token punctuation">)</span><span class="token punctuation">;</span>
		AcCmEntityColor bgColor<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mode<span class="token operator">-&gt;</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">isPlotGeneration</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">{</span>
			COLORREF rgbColor <span class="token operator">=</span> <span class="token punctuation">(</span>COLORREF<span class="token punctuation">)</span>colorSetings<span class="token punctuation">.</span>dwGfxModelBkColor<span class="token punctuation">;</span>
			<span class="token keyword">int</span> red <span class="token operator">=</span> rgbColor <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> green <span class="token operator">=</span> rgbColor <span class="token operator">&gt;&gt;</span> <span class="token number">8</span> <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> blue <span class="token operator">=</span> rgbColor <span class="token operator">&gt;&gt;</span> <span class="token number">16</span> <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setRed</span><span class="token punctuation">(</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setBlue</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setGreen</span><span class="token punctuation">(</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>
			mode<span class="token operator">-&gt;</span><span class="token function">subEntityTraits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTrueColor</span><span class="token punctuation">(</span>bgColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span>
		<span class="token punctuation">{</span>
			COLORREF rgbColor <span class="token operator">=</span> <span class="token punctuation">(</span>COLORREF<span class="token punctuation">)</span>colorSetings<span class="token punctuation">.</span>dwGfxLayoutBkColor<span class="token punctuation">;</span>
			<span class="token keyword">int</span> red <span class="token operator">=</span> rgbColor <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> green <span class="token operator">=</span> rgbColor <span class="token operator">&gt;&gt;</span> <span class="token number">8</span> <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			<span class="token keyword">int</span> blue <span class="token operator">=</span> rgbColor <span class="token operator">&gt;&gt;</span> <span class="token number">16</span> <span class="token operator">&amp;</span> <span class="token number">255</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setRed</span><span class="token punctuation">(</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setBlue</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>
			bgColor<span class="token punctuation">.</span><span class="token function">setGreen</span><span class="token punctuation">(</span>green<span class="token punctuation">)</span><span class="token punctuation">;</span>
			mode<span class="token operator">-&gt;</span><span class="token function">subEntityTraits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setTrueColor</span><span class="token punctuation">(</span>bgColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		mode<span class="token operator">-&gt;</span><span class="token function">subEntityTraits</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setFillType</span><span class="token punctuation">(</span>kAcGiFillAlways<span class="token punctuation">)</span><span class="token punctuation">;</span>
		mode<span class="token operator">-&gt;</span><span class="token function">geometry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">polygon</span><span class="token punctuation">(</span>wipePnts<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wipePnts<span class="token punctuation">.</span><span class="token function">asArrayPtr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6),c=[o];function e(u,i){return s(),a("div",null,c)}const k=n(p,[["render",e],["__file","ARX获取背景色.html.vue"]]);export{k as default};
