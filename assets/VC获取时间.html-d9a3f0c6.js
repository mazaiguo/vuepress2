import{_ as n,o as s,c as a,e as t}from"./app-a242af93.js";const p={},o=t(`<h1 id="vc获取时间" tabindex="-1"><a class="header-anchor" href="#vc获取时间" aria-hidden="true">#</a> VC获取时间</h1><h2 id="获取当前时间" tabindex="-1"><a class="header-anchor" href="#获取当前时间" aria-hidden="true">#</a> 获取当前时间</h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>	SYSTEMTIME localTimeMin<span class="token punctuation">;</span>
	<span class="token function">GetLocalTime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>localTimeMin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="计算两个时间的时间差" tabindex="-1"><a class="header-anchor" href="#计算两个时间的时间差" aria-hidden="true">#</a> 计算两个时间的时间差</h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;atltime.h&quot;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>

<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>cout<span class="token punctuation">;</span>
<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
<span class="token keyword">using</span> std<span class="token double-colon punctuation">::</span>wcout<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// 获取最小起始时间</span>
	CTime TimeObj<span class="token punctuation">;</span>
	SYSTEMTIME sysTimeMin<span class="token punctuation">;</span>	
	TimeObj<span class="token punctuation">.</span><span class="token function">GetAsSystemTime</span><span class="token punctuation">(</span>sysTimeMin<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//获取可传参的时间最小值</span>
	__time64_t time <span class="token operator">=</span> TimeObj<span class="token punctuation">.</span><span class="token function">GetTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//此时获取的time=0;</span>
	
<span class="token comment">// 最小start time 1970.01.01.08.0.0，小于此值会出现断言失败。</span>
<span class="token comment">//	CTime startTime = CTime(1970,01,01,08,00,00); </span>
	CTime startTime <span class="token operator">=</span> <span class="token function">CTime</span><span class="token punctuation">(</span>sysTimeMin<span class="token punctuation">.</span>wYear<span class="token punctuation">,</span>sysTimeMin<span class="token punctuation">.</span>wMonth<span class="token punctuation">,</span>sysTimeMin<span class="token punctuation">.</span>wDay<span class="token punctuation">,</span>sysTimeMin<span class="token punctuation">.</span>wHour<span class="token punctuation">,</span>sysTimeMin<span class="token punctuation">.</span>wMinute<span class="token punctuation">,</span>sysTimeMin<span class="token punctuation">.</span>wSecond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//最小Base start time 1970.1.2.0.0.0</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;起始时间：&quot;</span><span class="token punctuation">;</span>
	cout<span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;年&quot;</span><span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;月&quot;</span><span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;日&quot;</span><span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;时&quot;</span><span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;分&quot;</span><span class="token operator">&lt;&lt;</span>startTime<span class="token punctuation">.</span><span class="token function">GetSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;&lt;</span><span class="token string">&quot;秒&quot;</span><span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>   
	
	<span class="token comment">// 获取当前的本地时间</span>
	SYSTEMTIME sysTime<span class="token punctuation">;</span>
	<span class="token double-colon punctuation">::</span><span class="token function">GetLocalTime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sysTime<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	CTime <span class="token function">curTime</span><span class="token punctuation">(</span>sysTime<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//curTime精确到秒, 10位</span>
	
	<span class="token comment">// 计算当前时间与起始时间之间的时间差(秒)</span>
	CTimeSpan timeSpan<span class="token punctuation">;</span>
	timeSpan <span class="token operator">=</span> curTime <span class="token operator">-</span> startTime<span class="token punctuation">;</span> <span class="token comment">// 由于设置的是最小起始时间，所以timeSpan与curTime的成员变量存储的值是相同的。</span>
	
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;时间差：&quot;</span><span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;天&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;小时&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;分&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;秒&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>   
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;总小时数：&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetTotalHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;小时&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;总分钟数：&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetTotalMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;分钟&quot;</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>   
	cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;总秒数：&quot;</span> <span class="token operator">&lt;&lt;</span> timeSpan<span class="token punctuation">.</span><span class="token function">GetTotalSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;秒&quot;</span> <span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>

	CString strTime<span class="token punctuation">;</span>
	<span class="token comment">// 将当前时间curTime对象格式化为字符串   </span>
	strTime <span class="token operator">=</span> curTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
	<span class="token comment">// 输出格式化字符串，由于字符串使用Unicode字符，所以要使用wcout输出   </span>
	wcout<span class="token operator">&lt;&lt;</span><span class="token string">&quot;日期时间：&quot;</span><span class="token operator">&lt;&lt;</span><span class="token punctuation">(</span>LPCTSTR<span class="token punctuation">)</span>strTime<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>   

	<span class="token function">system</span><span class="token punctuation">(</span><span class="token string">&quot;pause&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="获取文件的修改时间" tabindex="-1"><a class="header-anchor" href="#获取文件的修改时间" aria-hidden="true">#</a> 获取文件的修改时间</h2><div class="language-cpp line-numbers-mode" data-ext="cpp"><pre class="language-cpp"><code>FILETIME ftCreate<span class="token punctuation">,</span> ftModify<span class="token punctuation">,</span> ftAccess<span class="token punctuation">;</span>
 CString strCreateTime<span class="token punctuation">,</span> strModifyTime<span class="token punctuation">,</span> strAccessTime<span class="token punctuation">;</span>
 CString strFilePath <span class="token operator">=</span> <span class="token function">_T</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 HANDLE hFile <span class="token operator">=</span> <span class="token function">CreateFile</span><span class="token punctuation">(</span>strFilePath<span class="token punctuation">,</span> GENERIC_READ<span class="token punctuation">,</span>          <span class="token comment">// open for reading</span>
  FILE_SHARE_READ<span class="token punctuation">,</span>       <span class="token comment">// share for reading</span>
  <span class="token constant">NULL</span><span class="token punctuation">,</span>                            <span class="token comment">// default security</span>
  OPEN_EXISTING<span class="token punctuation">,</span>          <span class="token comment">// existing file only</span>
  FILE_FLAG_BACKUP_SEMANTICS <span class="token punctuation">,</span> <span class="token comment">// normal file</span>
  <span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

 SYSTEMTIME stLocal<span class="token punctuation">;</span>
 <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">GetFileTime</span><span class="token punctuation">(</span>hFile<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ftCreate<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ftAccess<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ftModify<span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">;</span>
 <span class="token punctuation">}</span>

 <span class="token function">ZeroMemory</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stLocal<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>SYSTEMTIME<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">FileTimeToSystemTime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ftCreate<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stLocal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 strCreateTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;%04d-%02d-%02d %02d:%02d:%02d&quot;</span><span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wYear<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMonth<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wDay<span class="token punctuation">,</span>  stLocal<span class="token punctuation">.</span>wHour<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMinute<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wSecond<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 文件创建时间</span>
 <span class="token function">ZeroMemory</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stLocal<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>SYSTEMTIME<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">FileTimeToSystemTime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ftModify<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stLocal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 strModifyTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;%04d-%02d-%02d %02d:%02d:%02d&quot;</span><span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wYear<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMonth<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wDay<span class="token punctuation">,</span>  stLocal<span class="token punctuation">.</span>wHour<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMinute<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wSecond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  文件修改时间</span>
 <span class="token function">ZeroMemory</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>stLocal<span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>SYSTEMTIME<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">FileTimeToSystemTime</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ftAccess<span class="token punctuation">,</span> <span class="token operator">&amp;</span>stLocal<span class="token punctuation">)</span><span class="token punctuation">;</span>
 strAccessTime<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;%04d-%02d-%02d %02d:%02d:%02d&quot;</span><span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wYear<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMonth<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wDay<span class="token punctuation">,</span>  stLocal<span class="token punctuation">.</span>wHour<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wMinute<span class="token punctuation">,</span> stLocal<span class="token punctuation">.</span>wSecond<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 文件访问时间</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,7),e=[o];function c(l,i){return s(),a("div",null,e)}const k=n(p,[["render",c],["__file","VC获取时间.html.vue"]]);export{k as default};
